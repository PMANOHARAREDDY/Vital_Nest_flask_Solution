<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VitalNest</title>
    <link rel = "stylesheet" href = "/static/style.css">
</head>
<body  style="background-color:#ebf9fa;">
    <h1 class="admin_user_approval_card_heading">Vital Nest Admin Dashboard - {{admin_id}}</h1>
    <hr>
    <div>
        <h2 style="text-align: center;">Registration Approval Data</h2>
        <table border="1.5" cellpadding="15" cellspacing="0" style="margin: auto; background-color: rgb(250, 240, 255);">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Aadhar</th>
                    <th>Mobile Number</th>
                    <th>User Type</th>
                    <th>Request timestamp</th>
                    <th>Take Action</th>
                </tr>
            </thead>
            <tbody style="background-color: white;">
                {% for record in approval_data %}
                <tr>
                    <td>{{ record[0] }}</td>
                    <td>{{ record[1] }}</td>
                    <td>{{ record[2] }}</td>
                    <td>{{ record[3] }}</td>
                    <td>{{ record[4] }}</td>
                    <td>
                        <form action="/approveUser" method="post">
                            <input type="hidden" name="name" value="{{record[0]}}">
                            <input type="hidden" name="aadhar" value="{{record[1]}}">
                            <input type="hidden" name="mobile" value="{{record[2]}}">
                            <input type="hidden" name="type" value="{{record[3]}}">
                            <input type="hidden" name="passwd" value="{{record[5]}}">
                            <button class="admin_user_approval_card_accept_button_design" type="submit" name="action" value="approve">Approve</button>
                            <button class="admin_user_approval_card_reject_button_design" type="submit" name="action" value="reject">Reject</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <hr>
        <div >
        <h2 style="text-align: center;">Search for Patient Records log Data</h2>
        <div class="admin_patient_record_card_design">
        <form action="/patientRecordsLogData" method="post">
            <label for="aadhar">Patient ID (Aadhar):</label><br>
            <input type="text" id="p_id" name="aadhar" pattern="\d{12}" maxlength="12" minlength="12" required><br><br>
            
            <input class="admin_patient_record_button_design" type="submit" value="Submit">
        </form>
        </div>
    </div>
    <hr>
    <div>
        <h2 style="text-align: center;">Users data</h2>
        <table border="1.5" cellpadding="15" cellspacing="0" style="margin: auto; background-color: rgb(250, 240, 255); ">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Aadhar</th>
                    <th>Mobile Number</th>
                    <th>User Type</th>
                </tr>
            </thead>
            <tbody style="background-color: white;">
                {% for user in users %}
                <tr>
                    <td>{{ user[0] }}</td>
                    <td>{{ user[1] }}</td>
                    <td>{{ user[2] }}</td>
                    <td>{{ user[3] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <hr>
    <div>
        <h2 style="text-align: center;">Hospital Managers in Charge</h2>
        <table border="1.5" cellpadding="15" cellspacing="0" style="margin: auto; background-color: rgb(250, 240, 255);">
            <thead>
                <tr>
                    <th>HSP ID</th>
                    <th>Manager ID</th>
                    <th>Phone Number</th>
                </tr>
            </thead>
            <tbody style="background-color: white;">
                {% for record in hsp_data %}
                <tr>
                    <td>{{ record[0] }}</td>
                    <td>{{ record[1] }}</td>
                    <td>{{ record[2] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <hr>
    <div>
        <h2 style="text-align: center;">Industry Managers in Charge</h2>
        <table border="1.5" cellpadding="15" cellspacing="0" style="margin: auto; background-color: rgb(250, 240, 255);">
            <thead>
                <tr>
                    <th>IND ID</th>
                    <th>Manager ID</th>
                    <th>Phone Number</th>
                </tr>
            </thead>
            <tbody style="background-color: white;">
                {% for record in ind_data %}
                <tr>
                    <td>{{ record[0] }}</td>
                    <td>{{ record[1] }}</td>
                    <td>{{ record[2] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <hr>
    <div>
        <h2 style="text-align: center;">Blood Donation Camp Requests</h2>
        <table border="1.5" cellpadding="15" cellspacing="0" style="margin: auto; background-color: rgb(250, 240, 255);">
            <thead>
                <tr>
                    <th>Request ID</th>
                    <th>NGO ID</th>
                    <th>Request Details</th>
                    <th>Status</th>
                    <th>Request Timestamp</th>
                    <th>Take Action</th>
                </tr>
            </thead>
            <tbody style="background-color: white;">
                {% for request in pending_blood_requests %}
                <tr>
                    <td>{{ request[0] }}</td>
                    <td>{{ request[1] }}</td>
                    <td>{{ request[2] }}</td>
                    <td>{{ request[3] }}</td>
                    <td>{{ request[4] }}</td>
                    <td>
                        {% if request[3] == 'pending' %}
                        <form action="/approveBloodDonationRequest" method="post">
                            <input type="hidden" name="request_id" value="{{ request[0] }}">
                            <button class="admin_user_approval_card_accept_button_design" type="submit" name="action" value="approve">Approve</button>
                            <button class="admin_user_approval_card_reject_button_design" type="submit" name="action" value="reject">Reject</button>
                        </form>
                        {% else %}
                        {{ request[3] }}
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <hr>
    <div>
        <h2 style="text-align: center;">Approved Blood Donation Camp Requests</h2>
        <table border="1.5" cellpadding="15" cellspacing="0" style="margin: auto; background-color: rgb(250, 240, 255);">
            <thead>
                <tr>
                    <th>Request ID</th>
                    <th>NGO ID</th>
                    <th>Request Details</th>
                    <th>Status</th>
                    <th>Request Timestamp</th>
                    <th>Donation Data</th>
                </tr>
            </thead>
            <tbody style="background-color: white;">
                {% for request in approved_blood_requests %}
                <tr>
                    <td>{{ request[0] }}</td>
                    <td>{{ request[1] }}</td>
                    <td>{{ request[2] }}</td>
                    <td>{{ request[3] }}</td>
                    <td>{{ request[4] }}</td>
                    <td>
                        <form action="/viewBloodDonationData" method="post">
                            <input type="hidden" name="request_id" value="{{ request[0] }}">
                            <button type="submit">View Data</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <hr>
    <div>
        <h2 style="text-align: center;">Blood Units Available</h2>
        <table border="1.5" cellpadding="15" cellspacing="0" style="margin: auto; background-color: rgb(250, 240, 255);">
            <thead>
                <tr>
                    <th>Blood Group</th>
                    <th>Units Available</th>
                </tr>
            </thead>
            <tbody style="background-color: white;">
                {% for unit in blood_units %}
                <tr>
                    <td>{{ unit[0] }}</td>
                    <td>{{ unit[1] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <hr>
    <div style="text-align: center;">
        <h2>Log Data</h2>

        <a href="/LogData">
        <button class="view_log_data_button">View Log Data</button>
        </a>
    </div>
    <hr>
    <div>
        <h2 style="text-align: center;">View Hospital Performance Metrics</h2>
        <form action="/hospitalMetrics" method="post">
            <label for="hsp_id">Select Hospital ID:</label>
            <select name="hsp_id" id="hsp_id" required>
                {% for hsp in hsp_data %}
                <option value="{{ hsp[0] }}">{{ hsp[0] }}</option>
                {% endfor %}
            </select><br><br>
            <label for="period_type">Select Period Type:</label>
            <select name="period_type" id="period_type" required>
                <option value="day">Day</option>
                <option value="month">Month</option>
                <option value="year">Year</option>
            </select><br><br>
            <div id="year_div" style="display:none;">
                <label for="year">Year:</label>
                <select name="year" id="year">
                    {% for y in range(2020, 2031) %}
                    <option value="{{ y }}">{{ y }}</option>
                    {% endfor %}
                </select><br><br>
            </div>
            <div id="month_div" style="display:none;">
                <label for="month">Month:</label>
                <select name="month" id="month">
                    <option value="01">January</option>
                    <option value="02">February</option>
                    <option value="03">March</option>
                    <option value="04">April</option>
                    <option value="05">May</option>
                    <option value="06">June</option>
                    <option value="07">July</option>
                    <option value="08">August</option>
                    <option value="09">September</option>
                    <option value="10">October</option>
                    <option value="11">November</option>
                    <option value="12">December</option>
                </select><br><br>
            </div>
            <div id="day_div" style="display:none;">
                <label for="day">Date:</label>
                <input type="date" name="day" id="day"><br><br>
            </div>
            <script>
                document.getElementById('period_type').addEventListener('change', function() {
                    var type = this.value;
                    document.getElementById('year_div').style.display = (type === 'year' || type === 'month') ? 'block' : 'none';
                    document.getElementById('month_div').style.display = (type === 'month') ? 'block' : 'none';
                    document.getElementById('day_div').style.display = (type === 'day') ? 'block' : 'none';
                    document.getElementById('year').required = (type === 'year' || type === 'month');
                    document.getElementById('month').required = (type === 'month');
                    document.getElementById('day').required = (type === 'day');
                });
            </script>
            <button type="submit">View Metrics</button>
        </form>
    </div>

</body>
</html>
